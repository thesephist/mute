"use strict";var $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document),MuteUtils={eventAdder:function(t,e,n){for(var r=$$(t)||[],o=r.length,c=0;c<o;c++)r[c].addEventListener(e,n);return r},extendObject:function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},getLocation:function(t){var e=t.getBoundingClientRect();return extendObject(e,{width:e.right-e.left,height:e.bottom-e.top}),e},nodeListToArray:function(t){return Array.prototype.slice.call(t)}};
"use strict";var Mute={muteMode:0,exemptDomains:[],currentDomain:null,el:{excludeOnButton:$(".excluder .on"),excludeOffButton:$(".excluder .off"),muteButton:$(".muter .mute"),stopButton:$(".muter .stop")},ev:{"excludeOnButton click":"excludeSite","excludeOffButton click":"includeSite","muteButton click":"setMute","stopButton click":"setStop"},f:{setDomainName:function(t){var e=this;chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){e.currentDomain=t[0].url.match(/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/)[0]})},toast:function(t){},excludeSite:function(t){this.currentDomain&&exemptDomains.indexOf(this.currentDomain)==-1&&this.exemptDomains.push(this.currentdomain),this.setSettings(),this.render()},includeSite:function(t){if(this.currentDomain){var e=exemptDomains.indexOf(this.currentDomain);e>-1&&this.exemptDomains.split(e,1),this.setSettings(),this.render()}},setMute:function(t){this.muteMode=0,this.setSettings(),this.render()},setStop:function(t){this.muteMode=1,this.setSettings(),this.render()},render:function(){switch(this.muteMode){case 0:this.el.stopButton.classList.remove("active"),this.el.muteButton.classList.add("active");break;case 1:this.el.muteButton.classList.remove("active"),this.el.stopButton.classList.add("active")}this.currentDomain&&exemptDomains.indexOf(this.currentDomain)>-1?(Mute.el.excludeOffButton.classList.remove("active"),Mute.el.excludeOnButton.classList.add("active")):(Mute.el.excludeOnButton.classList.remove("active"),Mute.el.excludeOffButton.classList.add("active"))},getSettings:function(){var t=this;return chrome.storage.sync.get({muteMode:0,exemptDomains:[]},function(e){t.muteMode=e.muteMode,t.exemptDomains=e.exemptDomains}),{muteMode:this.muteMode,exemptDomains:this.exemptDomains}},setSettings:function(){chrome.storage.sync.set({muteMode:this.muteMode,exemptDomains:this.exemptDomains},function(){this.toast("Saved!")})},sendMessage:function(t){var e=this;chrome.tabs.query({active:!0,currentWindow:!0},function(t){chrome.tabs.sendMessage(t[0].id,e.getSettings())})}}};Mute.init=function(){Object.keys(Mute.ev).forEach(function(t){var e=t.split(" ")[0],i=t.split(" ").splice(1).join(" "),s=Mute.f[Mute.ev[t]];MuteUtils.eventAdder(i,e,s)}),Mute.f.getSettings(),Mute.f.setDomainName(),Mute.f.render(),Mute.f.sendMessage(),console.info("Mute initialized")},Mute.init();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmluZCIsIiQkIiwicXVlcnlTZWxlY3RvckFsbCIsIk11dGVVdGlscyIsInNlbGVjdG9yIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJ0TGVuZ3RoIiwidGFyZ2V0cyIsImV2ZW50QWRkZXIiLCJsZW5ndGgiLCJpIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV4dGVuZE9iamVjdCIsIm9iaiIsImVsIiwiZm9yRWFjaCIsImtleSIsImdldExvY2F0aW9uIiwiYm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVmdCIsIndpZHRoIiwicmlnaHQiLCJub2RlTGlzdFRvQXJyYXkiLCJub2RlTGlzdCIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiTXV0ZSIsIm11dGVNb2RlIiwiZXhlbXB0RG9tYWlucyIsImV4Y2x1ZGVPbkJ1dHRvbiIsImV4Y2x1ZGVPZmZCdXR0b24iLCJldiIsImV4Y2x1ZGVPbkJ1dHRvbiBjbGljayIsImV4Y2x1ZGVPZmZCdXR0b24gY2xpY2siLCJtdXRlQnV0dG9uIGNsaWNrIiwic3RvcEJ1dHRvbiBjbGljayIsImYiLCJzZXREb21haW5OYW1lIiwidGhpcyIsImNocm9tZSIsInRhYnMiLCJxdWVyeSIsImFjdGl2ZSIsImxhc3RGb2N1c2VkV2luZG93Iiwic2VsZiIsInVybCIsIm1hdGNoIiwidG9hc3QiLCJtZXNzYWdlIiwiZXhjbHVkZVNpdGUiLCJldnQiLCJjdXJyZW50RG9tYWluIiwiaW5kZXhPZiIsInB1c2giLCJjdXJyZW50ZG9tYWluIiwic2V0U2V0dGluZ3MiLCJyZW5kZXIiLCJpbmNsdWRlU2l0ZSIsImluZGV4Iiwic3BsaXQiLCJzZXRNdXRlIiwic2V0U3RvcCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm11dGVCdXR0b24iLCJhZGQiLCJzdG9wQnV0dG9uIiwiZ2V0U2V0dGluZ3MiLCJfdGhpcyIsInN0b3JhZ2UiLCJzeW5jIiwiZ2V0IiwicmVjb3JkIiwic2V0Iiwic2VuZE1lc3NhZ2UiLCJfdGhpczIiLCJjdXJyZW50V2luZG93IiwiaWQiLCJpbml0IiwiT2JqZWN0Iiwia2V5cyIsImlkZW50aWZpZXIiLCJzcGxpY2UiLCJqb2luIiwiZm4iXSwibWFwcGluZ3MiOiJZQUFBLElBQUlBLEdBQUlDLFNBQVNDLGNBQWNDLEtBQUtGLFVBQ2hDRyxHQUFLSCxTQUFTSSxpQkFBaUJGLEtBQUtGLFVBQXBDRyxXQUVBRSxXQUFZLFNBQUFDLEVBQUFDLEVBQUFDLEdBR1IsSUFDSUMsR0FEQUMsR0FBVVAsR0FBR0csT0FEckJLLEVBQVlELEVBQUFFLE9BRUpILEVBQUFBLEVBQVVDLEVBQUFBLEVBRGRHLElBSUlILEVBQVFHLEdBQUdDLGlCQUFpQlAsRUFBV0MsRUFDMUMsT0FBQUUsSUFHSkssYUFYVyxTQUFBQyxFQUFBQyxHQWlCUCxNQUpMRixRQUFBQSxLQUFjRSxHQUFBQyxRQUFBLFNBQVNGLEdBR2ZBLEVBQUlHLEdBQU9GLEVBQUdFLEtBRGxCSCxHQVFKSSxZQUFhLFNBQVNILEdBRWxCLEdBQUlJLEdBQXFCSixFQUFHSyx1QkFPNUIsT0FMQVAsY0FBYU0sR0FBYk4sTUFBQUEsRUFBYU0sTUFBb0JBLEVBQUFFLEtBQzdCQyxPQUFPSCxFQUFtQkksT0FBUUosRUFBbUJFLE1BSWxERixHQUlYSyxnQkFBaUIsU0FBQUMsR0FDYixNQUFPQyxPQUFNQyxVQUFVQyxNQUFNQyxLQUFLSjtZQ3hDMUMsSUFBSUssT0FFQUMsU0FBQSxFQUNBQyxpQkFDQUQsY0FKTyxLQVNQaEIsSUFEQWtCLGdCQUFBcEMsRUFBQSxpQkFDSXFDLGlCQUFBckMsRUFBQSxrQkFDQW9DLFdBQUFBLEVBQUFBLGdCQUNBQyxXQUFBQSxFQUFBQSxpQkFNSkMsSUFEQUMsd0JBQUEsY0FDSUMseUJBQUEsY0FDQUMsbUJBQUEsVUFDQUMsbUJBQUEsV0FNSkMsR0FEQUMsY0FBQSxTQUFBbkMsR0FFSW1DLEdBQUFBLEdBQWVDLElBQ1hDLFFBQUFDLEtBQUFDLE9BQUFDLFFBQUEsRUFBQUMsbUJBQUEsR0FBQSxTQUFBSCxHQUNJSSxFQUFBQSxjQUFKSixFQUFBLEdBQUFLLElBQUFDLE1BQUEseURBQUEsTUFJSEMsTUFQRixTQUFBQyxLQVdFQyxZQVhGLFNBQUFDLEdBY1NaLEtBQUthLGVBQWlCdkIsY0FBY3dCLFFBQVFkLEtBQUthLGlCQUFrQixHQUFJYixLQUFLVixjQUFjeUIsS0FBS2YsS0FBS2dCLGVBQXhHaEIsS0FBSWlCLGNBR0pqQixLQUFLa0IsVUFDUkMsWUFsQkYsU0FBQVAsR0FxQkssR0FBS1osS0FBS2EsY0FBVixDQUFBLEdBQUlPLEdBQU1QLGNBQWVDLFFBQUFkLEtBQUFhLGNBR3JCTyxJQUFRLEdBQUlwQixLQUFLVixjQUFjK0IsTUFBTUQsRUFBTyxHQUFoRHBCLEtBQUlvQixjQUdKcEIsS0FBS2tCLFdBQ1JJLFFBNUJGLFNBQUFWLEdBK0JLWixLQUFLWCxTQUFXLEVBQWhCVyxLQUFLWCxjQUdMVyxLQUFLa0IsVUFDUkssUUFuQ0YsU0FBQVgsR0FzQ0taLEtBQUtYLFNBQVcsRUFBaEJXLEtBQUtYLGNBR0xXLEtBQUtrQixVQUNSQSxPQTFDRixXQTZDSyxPQUFRbEIsS0FBS1gsVUFEVCxJQUFBLEdBQ0lXLEtBQUtYLEdBQUFBLFdBQWJtQyxVQUFBQyxPQUFBLFVBQ0l6QixLQUFBM0IsR0FBQXFELFdBQUFGLFVBQUFHLElBQUEsU0FDSSxNQUNBLEtBQUEsR0FDQTNCLEtBQUEzQixHQUFBcUQsV0FBQUYsVUFBQUMsT0FBQSxVQUNKekIsS0FBQTNCLEdBQUF1RCxXQUFBSixVQUFBRyxJQUFBLFVBTEozQixLQUFBYSxlQUFBdkIsY0FBQXdCLFFBQUFkLEtBQUFhLGdCQUFBLEdBWUl6QixLQUFLZixHQUFHbUIsaUJBQWlCZ0MsVUFBVUMsT0FBTyxVQUQxQ3JDLEtBQUt5QixHQUFBQSxnQkFBaUJ2QixVQUFBQSxJQUFjd0IsWUFFcEMxQixLQUFLZixHQUFHa0IsZ0JBQWdCaUMsVUFBVUcsT0FBSSxVQUYxQ3ZDLEtBR09mLEdBQUFtQixpQkFBQWdDLFVBQUFHLElBQUEsWUFJVkUsWUEvREYsV0FBQSxHQUFBQyxHQUFBOUIsSUFzRVMsT0FKSkMsUUFBTzhCLFFBQVFDLEtBQUtDLEtBRHhCSixTQUFhLEVBQVd2QyxrQkFJakIsU0FBQTRDLEdBSEhqQyxFQUFPOEIsU0FBYUUsRUFBSTVDLFNBQ3BCQSxFQUFBQSxjQURvQjZDLEVBQUE1QyxpQkFLcEJELFNBQUtDLEtBQUFBLFNBTFRBLGNBQUFVLEtBQUFWLGdCQVVJQSxZQUFBQSxXQUZHVyxPQUFQOEIsUUFBQUMsS0FBQUcsS0ExRUw5QyxTQUFBVyxLQUFBWCxTQW1GT0MsY0FBZVUsS0FBS1YsZUFIMUIyQixXQUNFaEIsS0FBTzhCLE1BQUFBLGFBSUhLLFlBQUszQixTQUFNQyxHQUFYLEdBQUEyQixHQUFBckMsSUFDSEMsUUFMREMsS0FBQUMsT0FqRkhDLFFBQUEsRUE0RlNrQyxlQUFlLEdBSHZCRixTQUFBQSxHQUErQm5DLE9BQUFDLEtBQUFrQyxZQUFBbEMsRUFBQSxHQUFBcUMsR0FBQUYsRUFBQVIsbUJBTTFCekMsTUFBQW9ELEtBQUEsV0FTVEMsT0FBT0MsS0FBS3RELEtBQUtLLElBQUluQixRQUFRLFNBQVNxRSxHQWpJMUMsR0FBQWhGLEdBQUFnRixFQUFBdEIsTUFBQSxLQUFBLEdBbUlZM0QsRUFBV2lGLEVBQVd0QixNQUFNLEtBQUt1QixPQUFPLEdBQUdDLEtBQUssS0FMaERDLEVBQUExRCxLQUFBVSxFQUFXVixLQUFBSyxHQUFBa0QsR0FFbkJsRixXQUFBTSxXQUFBTCxFQUFBQyxFQUFBbUYsS0FFSTFELEtBQUFVLEVBQUErQixjQVNKekMsS0FBS1UsRUFBRUMsZ0JBTEh0QyxLQUFBQSxFQUFBQSxTQUdKMkIsS0FBQVUsRUFBQXNDLGNBRUFoRCxRQUFPVyxLQUFBQSxxQkFJUFgsS0FBQUEiLCJmaWxlIjoianMvbWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IuYmluZChkb2N1bWVudCksXG4gICAgJCQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xuXG52YXIgTXV0ZVV0aWxzID0ge1xuXG4gICAgZXZlbnRBZGRlcjogZnVuY3Rpb24oc2VsZWN0b3IsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRhcmdldHMgPSAkJChzZWxlY3RvcikgfHwgW10sXG4gICAgICAgICAgICB0TGVuZ3RoID0gdGFyZ2V0cy5sZW5ndGg7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRhcmdldHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXRzO1xuICAgIH0sXG5cbiAgICBleHRlbmRPYmplY3Q6IGZ1bmN0aW9uKG9iaiwgZWwpIHtcblxuICAgICAgICBPYmplY3Qua2V5cyhlbCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gZWxba2V5XTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcblxuICAgIH0sXG5cbiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24oZWwpIHtcblxuICAgICAgICB2YXIgYm91bmRpbmdDbGllbnRSZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgZXh0ZW5kT2JqZWN0KGJvdW5kaW5nQ2xpZW50UmVjdCwge1xuICAgICAgICAgICAgd2lkdGg6IGJvdW5kaW5nQ2xpZW50UmVjdC5yaWdodCAtIGJvdW5kaW5nQ2xpZW50UmVjdC5sZWZ0LFxuICAgICAgICAgICAgaGVpZ2h0OiBib3VuZGluZ0NsaWVudFJlY3QuYm90dG9tIC0gYm91bmRpbmdDbGllbnRSZWN0LnRvcFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYm91bmRpbmdDbGllbnRSZWN0O1xuXG4gICAgfSxcblxuICAgIG5vZGVMaXN0VG9BcnJheTogZnVuY3Rpb24obm9kZUxpc3QpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcbiAgICB9XG5cbn07XG4iLCJ2YXIgTXV0ZSA9IHtcblxuICAgIC8vIG11dGVNb2RlIDAgaXMganVzdCBtdXRlLFxuICAgIC8vIG11dGVNb2RlIDEgaXMgbXV0ZSBhbmQgc3RvcFxuICAgIG11dGVNb2RlOiAwLFxuICAgIGV4ZW1wdERvbWFpbnM6IFtdLFxuICAgIGN1cnJlbnREb21haW46IG51bGwsXG5cbiAgICAvLyBlbGVtZW50c1xuICAgIGVsOiB7XG4gICAgICAgIGV4Y2x1ZGVPbkJ1dHRvbjogJChcIi5leGNsdWRlciAub25cIiksXG4gICAgICAgIGV4Y2x1ZGVPZmZCdXR0b246ICQoXCIuZXhjbHVkZXIgLm9mZlwiKSxcbiAgICAgICAgbXV0ZUJ1dHRvbjogJChcIi5tdXRlciAubXV0ZVwiKSxcbiAgICAgICAgc3RvcEJ1dHRvbjogJChcIi5tdXRlciAuc3RvcFwiKVxuICAgIH0sXG5cbiAgICAvLyBldmVudHNcbiAgICBldjoge1xuICAgICAgICBcImV4Y2x1ZGVPbkJ1dHRvbiBjbGlja1wiOiBcImV4Y2x1ZGVTaXRlXCIsXG4gICAgICAgIFwiZXhjbHVkZU9mZkJ1dHRvbiBjbGlja1wiOiBcImluY2x1ZGVTaXRlXCIsXG4gICAgICAgIFwibXV0ZUJ1dHRvbiBjbGlja1wiOiBcInNldE11dGVcIixcbiAgICAgICAgXCJzdG9wQnV0dG9uIGNsaWNrXCI6IFwic2V0U3RvcFwiXG4gICAgfSxcblxuICAgIC8vIGZ1bmN0aW9uc1xuICAgIGY6IHtcbiAgICAgICAgc2V0RG9tYWluTmFtZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIC8vIGdldCB3aW5kb3cgZG9tYWluIG5hbWVcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHtcImFjdGl2ZVwiOiB0cnVlLCBcImxhc3RGb2N1c2VkV2luZG93XCI6IHRydWV9LCBmdW5jdGlvbih0YWJzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50RG9tYWluID0gdGFic1swXS51cmwubWF0Y2goL14oPzpodHRwcz86XFwvXFwvKT8oPzpbXkBcXC9cXG5dK0ApPyg/Ond3d1xcLik/KFteOlxcL1xcbl0rKS8pWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9hc3Q6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgLy8gcG9wIHVwIGEgdG9hc3RcbiAgICAgICAgfSxcblxuICAgICAgICBleGNsdWRlU2l0ZTogZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RG9tYWluICYmIGV4ZW1wdERvbWFpbnMuaW5kZXhPZih0aGlzLmN1cnJlbnREb21haW4pID09IC0xKSB0aGlzLmV4ZW1wdERvbWFpbnMucHVzaCh0aGlzLmN1cnJlbnRkb21haW4pO1xuXG4gICAgICAgICAgICB0aGlzLnNldFNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluY2x1ZGVTaXRlOiBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50RG9tYWluKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBpbmRleCA9IGV4ZW1wdERvbWFpbnMuaW5kZXhPZih0aGlzLmN1cnJlbnREb21haW4pO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHRoaXMuZXhlbXB0RG9tYWlucy5zcGxpdChpbmRleCwgMSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0TXV0ZTogZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB0aGlzLm11dGVNb2RlID0gMDtcblxuICAgICAgICAgICAgdGhpcy5zZXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRTdG9wOiBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHRoaXMubXV0ZU1vZGUgPSAxO1xuXG4gICAgICAgICAgICB0aGlzLnNldFNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMubXV0ZU1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuc3RvcEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLm11dGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLm11dGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbC5zdG9wQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RG9tYWluICYmIGV4ZW1wdERvbWFpbnMuaW5kZXhPZih0aGlzLmN1cnJlbnREb21haW4pID4gLTEpIHtcbiAgICAgICAgICAgICAgICBNdXRlLmVsLmV4Y2x1ZGVPZmZCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBNdXRlLmVsLmV4Y2x1ZGVPbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBNdXRlLmVsLmV4Y2x1ZGVPbkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIE11dGUuZWwuZXhjbHVkZU9mZkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNldHRpbmdzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuZ2V0KHtcbiAgICAgICAgICAgICAgICBtdXRlTW9kZTogMCxcbiAgICAgICAgICAgICAgICBleGVtcHREb21haW5zOiBbXVxuICAgICAgICAgICAgfSwgcmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm11dGVNb2RlID0gcmVjb3JkLm11dGVNb2RlO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlbXB0RG9tYWlucyA9IHJlY29yZC5leGVtcHREb21haW5zO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbXV0ZU1vZGU6IHRoaXMubXV0ZU1vZGUsXG4gICAgICAgICAgICAgICAgZXhlbXB0RG9tYWluczogdGhpcy5leGVtcHREb21haW5zXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFNldHRpbmdzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7XG4gICAgICAgICAgICAgIG11dGVNb2RlOiB0aGlzLm11dGVNb2RlLFxuICAgICAgICAgICAgICBleGVtcHREb21haW5zOiB0aGlzLmV4ZW1wdERvbWFpbnNcbiAgICAgICAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICB0aGlzLnRvYXN0KFwiU2F2ZWQhXCIpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgY3VycmVudFdpbmRvdzogdHJ1ZVxuICAgICAgICAgICAgfSwgdGFicyA9PiB7XG4gICAgICAgICAgICAgICAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UodGFic1swXS5pZCwgdGhpcy5nZXRTZXR0aW5ncygpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG59O1xuXG5NdXRlLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICBPYmplY3Qua2V5cyhNdXRlLmV2KS5mb3JFYWNoKGZ1bmN0aW9uKGlkZW50aWZpZXIpIHtcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IGlkZW50aWZpZXIuc3BsaXQoXCIgXCIpWzBdLFxuICAgICAgICAgICAgc2VsZWN0b3IgPSBpZGVudGlmaWVyLnNwbGl0KFwiIFwiKS5zcGxpY2UoMSkuam9pbihcIiBcIiksXG4gICAgICAgICAgICBmbiA9IE11dGUuZltNdXRlLmV2W2lkZW50aWZpZXJdXTtcblxuICAgICAgICBNdXRlVXRpbHMuZXZlbnRBZGRlcihzZWxlY3RvciwgZXZlbnROYW1lLCBmbik7XG4gICAgfSk7XG5cbiAgICAvLyByZWFkIGFuZCBhcHBseSBzZXR0aW5nc1xuICAgIE11dGUuZi5nZXRTZXR0aW5ncygpO1xuICAgIE11dGUuZi5zZXREb21haW5OYW1lKCk7XG4gICAgTXV0ZS5mLnJlbmRlcigpO1xuXG4gICAgLy8gdHJhbnNmZXJyaW5nIGNvbW11bmljYWJsZSBkYXRhIGFib3V0IGVhY2ggc2l0ZVxuICAgIE11dGUuZi5zZW5kTWVzc2FnZSgpO1xuXG4gICAgY29uc29sZS5pbmZvKFwiTXV0ZSBpbml0aWFsaXplZFwiKTtcblxufTtcblxuTXV0ZS5pbml0KCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
