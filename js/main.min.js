"use strict";var $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document),MuteUtils={eventAdder:function(t,e,n){for(var r=$$(t)||[],o=r.length,c=0;c<o;c++)r[c].addEventListener(e,n);return r},extendObject:function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},getLocation:function(t){var e=t.getBoundingClientRect();return extendObject(e,{width:e.right-e.left,height:e.bottom-e.top}),e},noteListToArray:function(t){return Array.prototype.slice.call(t)}};
"use strict";var Mute={muteMode:0,exemptDomains:[],currentDomain:null,el:{excludeOnButton:$(".excluder .on"),excludeOffButton:$(".excluder .off"),muteButton:$(".muter .mute"),stopButton:$(".muter .stop")},ev:{"excludeOnButton click":"excludeSite","excludeOffButton click":"includeSite","muteButton click":"setMute","stopButton click":"setStop"},f:{setDomainName:function(t){var e=this;chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){e.currentDomain=t[0].url.match(/^(?:https?:\/\/)?(?:[^@\/\n]+@)?(?:www\.)?([^:\/\n]+)/)[0]})},toast:function(t){},excludeSite:function(t){this.currentDomain&&exemptDomains.indexOf(this.currentDomain)==-1&&this.exemptDomains.push(this.currentdomain),this.setSettings(),this.render()},includeSite:function(t){if(this.currentDomain){var e=exemptDomains.indexOf(this.currentDomain);e>-1&&this.exemptDomains.split(e,1),this.setSettings(),this.render()}},setMute:function(t){this.muteMode=0,this.setSettings(),this.render()},setStop:function(t){this.muteMode=1,this.setSettings(),this.render()},render:function(){switch(this.muteMode){case 0:this.el.stopButton.classList.remove("active"),this.el.muteButton.classList.add("active");break;case 1:this.el.muteButton.classList.remove("active"),this.el.stopButton.classList.add("active")}this.currentDomain&&exemptDomains.indexOf(this.currentDomain)>-1?(Mute.el.excludeOffButton.classList.remove("active"),Mute.el.excludeOnButton.classList.add("active")):(Mute.el.excludeOnButton.classList.remove("active"),Mute.el.excludeOffButton.classList.add("active"))},getSettings:function(){return chrome.storage.sync.get({muteMode:this.muteMode,exemptDomains:this.exemptDomains},function(t){this.muteMode=t.muteMode,this.exemptDomains=t.muteMode}),{muteMode:this.muteMode,exemptDomains:this.exemptDomains}},setSettings:function(){chrome.storage.sync.set({muteMode:this.muteMode,exemptDomains:this.exemptDomains},function(){this.toast("Saved!")})},sendMessage:function(t){chrome.runtime.sendMessage(this.getSettings())}}};Mute.init=function(){Object.keys(Mute.ev).forEach(function(t){var e=t.split(" ")[0],i=t.split(" ").splice(1).join(" "),s=Mute.f[Mute.ev[t]];MuteUtils.eventAdder(i,e,s)}),Mute.f.getSettings(),Mute.f.setDomainName(),Mute.f.render(),Mute.f.sendMessage(),console.info("Mute initialized")},Mute.init();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYmluZCIsIiQkIiwicXVlcnlTZWxlY3RvckFsbCIsIk11dGVVdGlscyIsInNlbGVjdG9yIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJ0TGVuZ3RoIiwidGFyZ2V0cyIsImV2ZW50QWRkZXIiLCJsZW5ndGgiLCJpIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV4dGVuZE9iamVjdCIsIm9iaiIsImVsIiwiZm9yRWFjaCIsImtleSIsImdldExvY2F0aW9uIiwiYm91bmRpbmdDbGllbnRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVmdCIsIndpZHRoIiwicmlnaHQiLCJub3RlTGlzdFRvQXJyYXkiLCJub2RlTGlzdCIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiTXV0ZSIsIm11dGVNb2RlIiwiZXhlbXB0RG9tYWlucyIsImV4Y2x1ZGVPbkJ1dHRvbiIsImV4Y2x1ZGVPZmZCdXR0b24iLCJldiIsImV4Y2x1ZGVPbkJ1dHRvbiBjbGljayIsImV4Y2x1ZGVPZmZCdXR0b24gY2xpY2siLCJtdXRlQnV0dG9uIGNsaWNrIiwic3RvcEJ1dHRvbiBjbGljayIsImYiLCJzZXREb21haW5OYW1lIiwidGhpcyIsImNocm9tZSIsInRhYnMiLCJxdWVyeSIsImFjdGl2ZSIsImxhc3RGb2N1c2VkV2luZG93Iiwic2VsZiIsInVybCIsIm1hdGNoIiwidG9hc3QiLCJtZXNzYWdlIiwiZXhjbHVkZVNpdGUiLCJldnQiLCJjdXJyZW50RG9tYWluIiwiaW5kZXhPZiIsInB1c2giLCJjdXJyZW50ZG9tYWluIiwic2V0U2V0dGluZ3MiLCJyZW5kZXIiLCJpbmNsdWRlU2l0ZSIsImluZGV4Iiwic3BsaXQiLCJzZXRNdXRlIiwic2V0U3RvcCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm11dGVCdXR0b24iLCJhZGQiLCJzdG9wQnV0dG9uIiwiZ2V0U2V0dGluZ3MiLCJzeW5jIiwiZ2V0IiwicmVjb3JkIiwic2V0Iiwic2VuZE1lc3NhZ2UiLCJpbml0IiwiT2JqZWN0Iiwia2V5cyIsImlkZW50aWZpZXIiLCJqb2luIiwiZm4iXSwibWFwcGluZ3MiOiJZQUFBLElBQUlBLEdBQUlDLFNBQVNDLGNBQWNDLEtBQUtGLFVBQ2hDRyxHQUFLSCxTQUFTSSxpQkFBaUJGLEtBQUtGLFVBQXBDRyxXQUVBRSxXQUFZLFNBQUFDLEVBQUFDLEVBQUFDLEdBR1IsSUFDSUMsR0FEQUMsR0FBVVAsR0FBR0csT0FEckJLLEVBQVlELEVBQUFFLE9BRUpILEVBQUFBLEVBQVVDLEVBQUFBLEVBRGRHLElBSUlILEVBQVFHLEdBQUdDLGlCQUFpQlAsRUFBV0MsRUFDMUMsT0FBQUUsSUFHSkssYUFYVyxTQUFBQyxFQUFBQyxHQWlCUCxNQUpMRixRQUFBQSxLQUFjRSxHQUFBQyxRQUFBLFNBQVNGLEdBR2ZBLEVBQUlHLEdBQU9GLEVBQUdFLEtBRGxCSCxHQVFKSSxZQUFhLFNBQVNILEdBRWxCLEdBQUlJLEdBQXFCSixFQUFHSyx1QkFPNUIsT0FMQVAsY0FBYU0sR0FBYk4sTUFBQUEsRUFBYU0sTUFBb0JBLEVBQUFFLEtBQzdCQyxPQUFPSCxFQUFtQkksT0FBUUosRUFBbUJFLE1BSWxERixHQUlYSyxnQkFBaUIsU0FBQUMsR0FDYixNQUFPQyxPQUFNQyxVQUFVQyxNQUFNQyxLQUFLSjtZQ3hDMUMsSUFBSUssT0FFQUMsU0FBQSxFQUNBQyxpQkFDQUQsY0FKTyxLQVNQaEIsSUFEQWtCLGdCQUFBcEMsRUFBQSxpQkFDSXFDLGlCQUFBckMsRUFBQSxrQkFDQW9DLFdBQUFBLEVBQUFBLGdCQUNBQyxXQUFBQSxFQUFBQSxpQkFNSkMsSUFEQUMsd0JBQUEsY0FDSUMseUJBQUEsY0FDQUMsbUJBQUEsVUFDQUMsbUJBQUEsV0FNSkMsR0FEQUMsY0FBQSxTQUFBbkMsR0FFSW1DLEdBQUFBLEdBQWVDLElBQ1hDLFFBQUFDLEtBQUFDLE9BQUFDLFFBQUEsRUFBQUMsbUJBQUEsR0FBQSxTQUFBSCxHQUNJSSxFQUFBQSxjQUFKSixFQUFBLEdBQUFLLElBQUFDLE1BQUEseURBQUEsTUFJSEMsTUFQRixTQUFBQyxLQVdFQyxZQVhGLFNBQUFDLEdBY1NaLEtBQUthLGVBQWlCdkIsY0FBY3dCLFFBQVFkLEtBQUthLGlCQUFrQixHQUFJYixLQUFLVixjQUFjeUIsS0FBS2YsS0FBS2dCLGVBQXhHaEIsS0FBSWlCLGNBR0pqQixLQUFLa0IsVUFDUkMsWUFsQkYsU0FBQVAsR0FxQkssR0FBS1osS0FBS2EsY0FBVixDQUFBLEdBQUlPLEdBQU1QLGNBQWVDLFFBQUFkLEtBQUFhLGNBR3JCTyxJQUFRLEdBQUlwQixLQUFLVixjQUFjK0IsTUFBTUQsRUFBTyxHQUFoRHBCLEtBQUlvQixjQUdKcEIsS0FBS2tCLFdBQ1JJLFFBNUJGLFNBQUFWLEdBK0JLWixLQUFLWCxTQUFXLEVBQWhCVyxLQUFLWCxjQUdMVyxLQUFLa0IsVUFDUkssUUFuQ0YsU0FBQVgsR0FzQ0taLEtBQUtYLFNBQVcsRUFBaEJXLEtBQUtYLGNBR0xXLEtBQUtrQixVQUNSQSxPQTFDRixXQTZDSyxPQUFRbEIsS0FBS1gsVUFEVCxJQUFBLEdBQ0lXLEtBQUtYLEdBQUFBLFdBQWJtQyxVQUFBQyxPQUFBLFVBQ0l6QixLQUFBM0IsR0FBQXFELFdBQUFGLFVBQUFHLElBQUEsU0FDSSxNQUNBLEtBQUEsR0FDQTNCLEtBQUEzQixHQUFBcUQsV0FBQUYsVUFBQUMsT0FBQSxVQUNKekIsS0FBQTNCLEdBQUF1RCxXQUFBSixVQUFBRyxJQUFBLFVBTEozQixLQUFBYSxlQUFBdkIsY0FBQXdCLFFBQUFkLEtBQUFhLGdCQUFBLEdBWUl6QixLQUFLZixHQUFHbUIsaUJBQWlCZ0MsVUFBVUMsT0FBTyxVQUQxQ3JDLEtBQUt5QixHQUFBQSxnQkFBaUJ2QixVQUFBQSxJQUFjd0IsWUFFcEMxQixLQUFLZixHQUFHa0IsZ0JBQWdCaUMsVUFBVUcsT0FBSSxVQUYxQ3ZDLEtBR09mLEdBQUFtQixpQkFBQWdDLFVBQUFHLElBQUEsWUFJVkUsWUEvREYsV0EwRU0sTUFUTEEsUUFBQUEsUUFBYUMsS0FBQUMsS0FFVDlCLFNBQUFELEtBQUFYLFNBQ0lDLGNBQUFVLEtBQUFWLGVBQ0FELFNBQUFBLEdBQ0FDLEtBQUFBLFNBQWUwQyxFQUFLMUMsU0FDckJVLEtBQUFWLGNBQWdCMEMsRUFBQTNDLFlBTWZBLFNBQVVXLEtBQUtYLFNBRG5CQyxjQUFPVSxLQUFBVixnQkFJVjJCLFlBaEZGLFdBa0ZDQSxPQUFBQSxRQUFhYSxLQUFBRyxLQUdQNUMsU0FBVVcsS0FBS1gsU0FEbkJZLGNBQWU2QixLQUFLRyxlQUNoQjVDLFdBQ0FDLEtBQUFBLE1BQUFBLGFBSUw0QyxZQTFGRixTQUFBeEIsR0E0RkN3QixPQUFBQSxRQUFhQSxZQUFBbEMsS0FBU1UsaUJBckhuQnRCLE1BQVgrQyxLQUFBLFdBZ0lJQyxPQUFPQyxLQUFLakQsS0FBS0ssSUFBSW5CLFFBQVEsU0FBU2dFLEdBRHRDLEdBQUEzRSxHQUFBMkUsRUFBQWpCLE1BQUEsS0FBQSxHQUNPZ0IsRUFBUEMsRUFBNkJqQixNQUFBLEtBQVNpQixPQUFBQSxHQUFZQyxLQUFBLEtBQzFDNUUsRUFBQUEsS0FBQUEsRUFBWTJFLEtBQUFBLEdBQUFBLEdBQWhCN0UsV0FFUzJCLFdBQVlLLEVBQUc2QyxFQUZ4QkUsS0FRSnBELEtBQUtVLEVBQUUrQixjQURQekMsS0FBQVUsRUFBQUMsZ0JBQ0FYLEtBQUtVLEVBQUUrQixTQUtQekMsS0FBS1UsRUFBRW9DLGNBQVA5QyxRQUFPOEMsS0FBQUEscUJBTVg5QyxLQUFLK0MiLCJmaWxlIjoianMvbWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IuYmluZChkb2N1bWVudCksXG4gICAgJCQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xuXG52YXIgTXV0ZVV0aWxzID0ge1xuXG4gICAgZXZlbnRBZGRlcjogZnVuY3Rpb24oc2VsZWN0b3IsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRhcmdldHMgPSAkJChzZWxlY3RvcikgfHwgW10sXG4gICAgICAgICAgICB0TGVuZ3RoID0gdGFyZ2V0cy5sZW5ndGg7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0TGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRhcmdldHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXRzO1xuICAgIH0sXG5cbiAgICBleHRlbmRPYmplY3Q6IGZ1bmN0aW9uKG9iaiwgZWwpIHtcblxuICAgICAgICBPYmplY3Qua2V5cyhlbCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gZWxba2V5XTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcblxuICAgIH0sXG5cbiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24oZWwpIHtcblxuICAgICAgICB2YXIgYm91bmRpbmdDbGllbnRSZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgZXh0ZW5kT2JqZWN0KGJvdW5kaW5nQ2xpZW50UmVjdCwge1xuICAgICAgICAgICAgd2lkdGg6IGJvdW5kaW5nQ2xpZW50UmVjdC5yaWdodCAtIGJvdW5kaW5nQ2xpZW50UmVjdC5sZWZ0LFxuICAgICAgICAgICAgaGVpZ2h0OiBib3VuZGluZ0NsaWVudFJlY3QuYm90dG9tIC0gYm91bmRpbmdDbGllbnRSZWN0LnRvcFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYm91bmRpbmdDbGllbnRSZWN0O1xuXG4gICAgfSxcblxuICAgIG5vdGVMaXN0VG9BcnJheTogZnVuY3Rpb24obm9kZUxpc3QpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcbiAgICB9XG5cbn07XG4iLCJ2YXIgTXV0ZSA9IHtcblxuICAgIC8vIG11dGVNb2RlIDAgaXMganVzdCBtdXRlLFxuICAgIC8vIG11dGVNb2RlIDEgaXMgbXV0ZSBhbmQgc3RvcFxuICAgIG11dGVNb2RlOiAwLFxuICAgIGV4ZW1wdERvbWFpbnM6IFtdLFxuICAgIGN1cnJlbnREb21haW46IG51bGwsXG5cbiAgICAvLyBlbGVtZW50c1xuICAgIGVsOiB7XG4gICAgICAgIGV4Y2x1ZGVPbkJ1dHRvbjogJChcIi5leGNsdWRlciAub25cIiksXG4gICAgICAgIGV4Y2x1ZGVPZmZCdXR0b246ICQoXCIuZXhjbHVkZXIgLm9mZlwiKSxcbiAgICAgICAgbXV0ZUJ1dHRvbjogJChcIi5tdXRlciAubXV0ZVwiKSxcbiAgICAgICAgc3RvcEJ1dHRvbjogJChcIi5tdXRlciAuc3RvcFwiKVxuICAgIH0sXG5cbiAgICAvLyBldmVudHNcbiAgICBldjoge1xuICAgICAgICBcImV4Y2x1ZGVPbkJ1dHRvbiBjbGlja1wiOiBcImV4Y2x1ZGVTaXRlXCIsXG4gICAgICAgIFwiZXhjbHVkZU9mZkJ1dHRvbiBjbGlja1wiOiBcImluY2x1ZGVTaXRlXCIsXG4gICAgICAgIFwibXV0ZUJ1dHRvbiBjbGlja1wiOiBcInNldE11dGVcIixcbiAgICAgICAgXCJzdG9wQnV0dG9uIGNsaWNrXCI6IFwic2V0U3RvcFwiXG4gICAgfSxcblxuICAgIC8vIGZ1bmN0aW9uc1xuICAgIGY6IHtcbiAgICAgICAgc2V0RG9tYWluTmFtZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIC8vIGdldCB3aW5kb3cgZG9tYWluIG5hbWVcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGNocm9tZS50YWJzLnF1ZXJ5KHtcImFjdGl2ZVwiOiB0cnVlLCBcImxhc3RGb2N1c2VkV2luZG93XCI6IHRydWV9LCBmdW5jdGlvbih0YWJzKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50RG9tYWluID0gdGFic1swXS51cmwubWF0Y2goL14oPzpodHRwcz86XFwvXFwvKT8oPzpbXkBcXC9cXG5dK0ApPyg/Ond3d1xcLik/KFteOlxcL1xcbl0rKS8pWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9hc3Q6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgLy8gcG9wIHVwIGEgdG9hc3RcbiAgICAgICAgfSxcblxuICAgICAgICBleGNsdWRlU2l0ZTogZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RG9tYWluICYmIGV4ZW1wdERvbWFpbnMuaW5kZXhPZih0aGlzLmN1cnJlbnREb21haW4pID09IC0xKSB0aGlzLmV4ZW1wdERvbWFpbnMucHVzaCh0aGlzLmN1cnJlbnRkb21haW4pO1xuXG4gICAgICAgICAgICB0aGlzLnNldFNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluY2x1ZGVTaXRlOiBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50RG9tYWluKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBpbmRleCA9IGV4ZW1wdERvbWFpbnMuaW5kZXhPZih0aGlzLmN1cnJlbnREb21haW4pO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHRoaXMuZXhlbXB0RG9tYWlucy5zcGxpdChpbmRleCwgMSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0TXV0ZTogZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICB0aGlzLm11dGVNb2RlID0gMDtcblxuICAgICAgICAgICAgdGhpcy5zZXRTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRTdG9wOiBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgIHRoaXMubXV0ZU1vZGUgPSAxO1xuXG4gICAgICAgICAgICB0aGlzLnNldFNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMubXV0ZU1vZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuc3RvcEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLm11dGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLm11dGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbC5zdG9wQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RG9tYWluICYmIGV4ZW1wdERvbWFpbnMuaW5kZXhPZih0aGlzLmN1cnJlbnREb21haW4pID4gLTEpIHtcbiAgICAgICAgICAgICAgICBNdXRlLmVsLmV4Y2x1ZGVPZmZCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBNdXRlLmVsLmV4Y2x1ZGVPbkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBNdXRlLmVsLmV4Y2x1ZGVPbkJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIE11dGUuZWwuZXhjbHVkZU9mZkJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNldHRpbmdzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIHJldHVybiBzZXR0aW5nc1xuICAgICAgICAgICAgY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoe1xuICAgICAgICAgICAgICAgIC8vIGtleXMgYW5kIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgICAgICAgICAgbXV0ZU1vZGU6IHRoaXMubXV0ZU1vZGUsXG4gICAgICAgICAgICAgICAgZXhlbXB0RG9tYWluczogdGhpcy5leGVtcHREb21haW5zXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihyZWNvcmQpe1xuICAgICAgICAgICAgICAgIHRoaXMubXV0ZU1vZGUgPSByZWNvcmQubXV0ZU1vZGU7XG4gICAgICAgICAgICAgICAgdGhpcy5leGVtcHREb21haW5zID0gcmVjb3JkLm11dGVNb2RlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbXV0ZU1vZGU6IHRoaXMubXV0ZU1vZGUsXG4gICAgICAgICAgICAgICAgZXhlbXB0RG9tYWluczogdGhpcy5leGVtcHREb21haW5zXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFNldHRpbmdzOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgIGNocm9tZS5zdG9yYWdlLnN5bmMuc2V0KHtcbiAgICAgICAgICAgICAgbXV0ZU1vZGU6IHRoaXMubXV0ZU1vZGUsXG4gICAgICAgICAgICAgIGV4ZW1wdERvbWFpbnM6IHRoaXMuZXhlbXB0RG9tYWluc1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHRoaXMudG9hc3QoXCJTYXZlZCFcIilcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZW5kTWVzc2FnZTogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICAgICAgLy8gc2VuZCBtc3NhZ2UgdG8gaW5qZWN0ZWQuanNcbiAgICAgICAgICAgIGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHRoaXMuZ2V0U2V0dGluZ3MoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbn07XG5cbk11dGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgIE9iamVjdC5rZXlzKE11dGUuZXYpLmZvckVhY2goZnVuY3Rpb24oaWRlbnRpZmllcikge1xuICAgICAgICB2YXIgZXZlbnROYW1lID0gaWRlbnRpZmllci5zcGxpdChcIiBcIilbMF0sXG4gICAgICAgICAgICBzZWxlY3RvciA9IGlkZW50aWZpZXIuc3BsaXQoXCIgXCIpLnNwbGljZSgxKS5qb2luKFwiIFwiKSxcbiAgICAgICAgICAgIGZuID0gTXV0ZS5mW011dGUuZXZbaWRlbnRpZmllcl1dO1xuXG4gICAgICAgIE11dGVVdGlscy5ldmVudEFkZGVyKHNlbGVjdG9yLCBldmVudE5hbWUsIGZuKTtcbiAgICB9KTtcblxuICAgIC8vIHJlYWQgYW5kIGFwcGx5IHNldHRpbmdzXG4gICAgTXV0ZS5mLmdldFNldHRpbmdzKCk7XG4gICAgTXV0ZS5mLnNldERvbWFpbk5hbWUoKTtcbiAgICBNdXRlLmYucmVuZGVyKCk7XG5cbiAgICAvLyB0cmFuc2ZlcnJpbmcgY29tbXVuaWNhYmxlIGRhdGEgYWJvdXQgZWFjaCBzaXRlXG4gICAgTXV0ZS5mLnNlbmRNZXNzYWdlKCk7XG5cbiAgICBjb25zb2xlLmluZm8oXCJNdXRlIGluaXRpYWxpemVkXCIpO1xuXG59O1xuXG5NdXRlLmluaXQoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
